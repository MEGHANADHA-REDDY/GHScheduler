{% extends "base.html" %}

{% block extra_css %}
<style>
    .calendar {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        background-color: #fff;
    }
    .calendar th, .calendar td {
        border: 1px solid #ddd;
        padding: 12px;
        text-align: center;
        vertical-align: top;
    }
    .calendar th {
        background-color: #f8f9fa;
        font-weight: bold;
    }
    .day-header {
        background-color: #333;
        color: white;
        padding: 10px;
        text-align: left;
    }
    .shift-cell {
        min-height: 60px;
    }
    .caregiver-name {
        display: inline-block;
        margin: 2px;
        padding: 4px 8px;
        border-radius: 4px;
    }
</style>
{% endblock %}

{% block content %}
<h1>Weekly Schedule</h1>

<div class="legend">
    <h3>Shift Times:</h3>
    <span class="legend-item shift-A">A Shift (6AM-2PM)</span>
    <span class="legend-item shift-G">G Shift (12PM-8PM)</span>
    <span class="legend-item shift-B">B Shift (4PM-12AM)</span>
    <span class="legend-item shift-C">C Shift (12AM-8AM)</span>
</div>

<table class="calendar">
    <thead>
        <tr>
            <th>Day</th>
            <th>A Shift</th>
            <th>G Shift</th>
            <th>B Shift</th>
            <th>C Shift</th>
        </tr>
    </thead>
    <tbody>
        {% for day in range(7) %}
        <tr>
            <td class="day-header">
                {% set current_date = dates[day] %}
                {{ current_date.strftime('%A') }}<br>
                <small>{{ current_date.strftime('%Y-%m-%d') }}</small>
            </td>
            {% for shift_type in ['A', 'G', 'B', 'C'] %}
            <td class="shift-cell">
                {% for shift in shifts %}
                    {% if shift.date == current_date.date() and shift.shift_type == shift_type %}
                        <div class="caregiver-name shift-{{ shift_type }}">
                            {{ shift.caregiver.name }}
                        </div>
                    {% endif %}
                {% endfor %}
            </td>
            {% endfor %}
        </tr>
        {% endfor %}
    </tbody>
</table>

<div class="legend" style="margin-top: 20px;">
    <h3>Note:</h3>
    <span>No B shift on Saturdays</span>
</div>
{% endblock %} 